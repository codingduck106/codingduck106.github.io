<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Paste → /site</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
</head>
<body>
<script>
(function() {
  const KEY = "raw_html_code";

  // normalize GitHub Pages path (handles repo subpath)
  const base = location.pathname.replace(/index\.html$/, "");
  const isSite = location.pathname.endsWith("/site") || location.pathname.endsWith("/site/");

  if (isSite) {
    const code = sessionStorage.getItem(KEY);
    if (code) {
      document.open();
      document.write(code);
      document.close();
    } else {
      document.body.innerHTML = "<h2>No HTML stored.</h2><p><a href='" + base + "'>Go back to editor</a></p>";
    }
    return;
  }

  // render form page
  document.body.innerHTML = `
    <h1>Paste HTML → /site</h1>
    <form id="form">
      <textarea id="code" style="width:100%;height:300px;"></textarea><br>
      <button type="submit">Go to /site</button>
    </form>
    <p style="color:#666;font-size:14px">
      Your code will replace the site itself at <code>/site</code>.<br>
      Stored only in sessionStorage (cleared when tab closes).
    </p>
  `;

  document.getElementById("form").addEventListener("submit", e => {
    e.preventDefault();
    const val = document.getElementById("code").value;
    sessionStorage.setItem(KEY, val);
    // redirect to /site (works on GitHub Pages)
    location.href = base + "site";
  });
})();
</script>
</body>
</html>
